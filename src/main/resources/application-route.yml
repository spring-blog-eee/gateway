spring:
  cloud:
    gateway:
        routes:
          - id: public-resource-route
            uri: lb://resource-service
            predicates:
              - Path=/api/resources/oss/public/**
            filters:
              - RewritePath=/api/resources/(?<segment>.*), /$\{segment}

          - id: public-blog-route
            uri: lb://blog-service
            predicates:
              - Path=/api/blogs/blog/list-top, /api/blogs/blog/get-count, /api/blogs/blog/list, /api/blogs/comment/get-count, /api/blogs/comment/list, /api/blogs/blog/get
            filters:
              - RewritePath=/api/blogs/(?<segment>.*), /$\{segment}

          - id: account-route
            uri: lb://account-service
            predicates:
              - Path=/api/account/**
            filters:
              - RewritePath=/api/account/(?<segment>.*), /$\{segment}

          - id: ai-route
            uri: lb://ai-service
            predicates:
                - Path=/api/llm/**
            filters:
              - RewritePath=/api/llm/(?<segment>.*), /$\{segment}
              - name: RouteBasedAuthFilter
                args:
                  requiredAuth: true

          - id: resource-route
            uri: lb://resource-service
            predicates:
                - Path=/api/resources/**
            filters:
              - RewritePath=/api/resources/(?<segment>.*), /$\{segment}
              - name: RouteBasedAuthFilter
                args:
                  requiredAuth: true

          - id: blog-service
            uri: lb://blog-service
            predicates:
                - Path=/api/blogs/**
            filters:
              - RewritePath=/api/blogs/(?<segment>.*), /$\{segment}
              - name: RouteBasedAuthFilter
                args:
                  requiredAuth: true
        default-filters:
          - AddResponseHeader=X-Response-Default, Default
          - RewritePath=/api/(?<segment>.*), /$\{segment}